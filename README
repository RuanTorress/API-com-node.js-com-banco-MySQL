# Resumo técnico da API de gráficos (Node.js + Express + Sequelize + MySQL)

Visão geral
- API simples em Node.js que expõe endpoints para retornar dados prontos para gráficos (Chart.js).
- Conexão com MySQL via Sequelize (`models/db.js`).
- Server: `app.js`, porta 8081.

Front-end
- Foi criado um front-end simples (`dashboard.html`) que consome os endpoints da API (Chart.js). O arquivo é servido pelo servidor em `http://localhost:8081/` e integra visualmente os dados retornados pelos endpoints de gráfico.

Arquivos principais
- `app.js` — define rotas e serve o front-end (`dashboard.html`):
  - GET /chart/pizza       → dados por categoria (tabela `vendas`)
  - GET /chart/linha       → totais mensais (tabela `vendas_mensais`)
  - GET /chart/barra       → dados por categoria ordenados (tabela `vendas`)
  - GET /chart/pizzaUsuarios → contagem por sexo (tabela `usuarios`)
  - GET / (ou abrir `/dashboard.html`) → página estática com visualização (Chart.js)
- `models/db.js` — configuração do Sequelize (host, usuário, senha, database).

Dependências (mínimas)
- node >= 14
- npm
- express
- sequelize
- mysql2

Instalação e execução
1. Vá para a pasta do projeto:
   ```powershell
   cd C:\Users\ruanf\Desktop\api
   ```
2. Instale dependências:
   ```powershell
   npm install
   ```
   (ou instale os pacotes explicitamente: `npm install express sequelize mysql2`)
3. Iniciar o servidor:
   ```powershell
   node app.js
   # ou durante desenvolvimento
   npx nodemon app.js
   ```
4. Acesse o front-end (dashboard) no navegador:
   ```
   http://localhost:8081
   ```
   A página `dashboard.html` será servida pela API e consumirá os endpoints de dados.

Endpoints disponíveis (exemplos de uso)
- GET /chart/pizza
- GET /chart/linha
- GET /chart/barra
- GET /chart/pizzaUsuarios

Exemplos de resposta (com dados já populados no seu banco)
- GET /chart/pizza

```json
{
  "tipo": "pizza",
  "dados": {
    "labels": ["Eletrônicos","Roupas","Alimentos","Moveis","Brinquedos"],
    "datasets": [{"data": [40,25,70,15,30]}]
  }
}
```

- GET /chart/linha

```json
{
  "tipo": "linha",
  "dados": {
    "labels": ["Janeiro","Fevereiro","Março","Abril","Maio"],
    "datasets": [{"label": "Total mensal", "data": [120,150,130,200,220]}]
  }
}
```

- GET /chart/pizzaUsuarios

```json
{
  "tipo": "pie",
  "dados": {
    "labels": ["Masculino","Feminino"],
    "datasets": [{"data": [3,3]}]
  }
}
```

Boas práticas e observações
- Credenciais não devem ficar hardcoded. Use variáveis de ambiente (ex.: dotenv) em produção.
- Verifique se o MySQL está rodando e se o banco `cadastro` existe com as tabelas e dados.
- Se ocorrer erro de conexão: confira host, usuário, senha e permissões do MySQL.
- Nodemon não encontrado no Windows: use `npx nodemon app.js` ou instale globalmente `npm install -g nodemon`.
- Evite abrir `dashboard.html` via `file://` — a página agora é servida pelo servidor para evitar problemas de CORS.

Possíveis próximos passos
- Adicionar variáveis de ambiente (.env) e exemplo `.env.example`.
- Criar migrações/seeds com Sequelize CLI.
- Adicionar testes automáticos para endpoints (jest/supertest).
- Documentar com Swagger/OpenAPI.

Contato e manutenção
- Para reportar problemas ou pedir melhorias, inclua os logs do servidor (saída do `node app.js`) e exemplos de requests que falharam.

Resumo rápido de comandos (PowerShell):

```powershell
cd C:\Users\ruanf\Desktop\api
npm install
node app.js
# ou durante desenvolvimento
npx nodemon app.js
```
